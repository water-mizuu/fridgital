{
    "sourceFile": "lib/widgets/shared/miscellaneous/widgets/tags_view/overlays/select_delete_overlay.dart",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1700406225765,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1700406225765,
            "name": "Commit-0",
            "content": "// TODO(water-mizuu): Refactor this whole file.\r\n\r\nimport \"package:adaptive_dialog/adaptive_dialog.dart\";\r\nimport \"package:flutter/material.dart\";\r\nimport \"package:fridgital/back_end/tag_data.dart\";\r\nimport \"package:fridgital/shared/constants.dart\";\r\nimport \"package:fridgital/widgets/shared/miscellaneous/widgets/clickable_widget.dart\";\r\nimport \"package:fridgital/widgets/shared/miscellaneous/widgets/tags_view/notifications.dart\";\r\nimport \"package:fridgital/widgets/shared/miscellaneous/widgets/tags_view/tags_view.dart\";\r\nimport \"package:mouse_scroll/mouse_scroll.dart\";\r\nimport \"package:provider/provider.dart\";\r\n\r\nclass SelectDeleteOverlay extends StatelessWidget {\r\n  const SelectDeleteOverlay({super.key});\r\n\r\n  void Function() tapHandler(BuildContext context, Tag tag) {\r\n    return () async {\r\n      if (tag case Tag() as CustomTag) {\r\n        var answer = await showOkCancelAlertDialog(\r\n          context: context,\r\n          title: \"Are you sure you want to delete '${tag.name}'?\",\r\n          message: \"This action cannot be undone.\",\r\n        );\r\n\r\n        if (!context.mounted) {\r\n          return;\r\n        }\r\n\r\n        if (answer case OkCancelResult.ok) {\r\n          DeleteTag(tag).dispatch(context);\r\n          const SwitchOverlayNotification(mode: OverlayMode.select).dispatch(context);\r\n        }\r\n      }\r\n    };\r\n  }\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    var theme = Theme.of(context);\r\n    var addableTags = context.read<TagData>().addableTags;\r\n\r\n    return GestureDetector(\r\n      behavior: HitTestBehavior.translucent,\r\n      onTap: () {},\r\n      child: Container(\r\n        padding: const EdgeInsets.all(16.0),\r\n        decoration: const BoxDecoration(\r\n          color: FigmaColors.whiteAccent,\r\n          borderRadius: BorderRadius.all(Radius.circular(5.0)),\r\n        ),\r\n        child: Column(\r\n          mainAxisSize: MainAxisSize.min,\r\n          children: [\r\n            Align(\r\n              alignment: Alignment.centerLeft,\r\n              child: Row(\r\n                children: [\r\n                  Padding(\r\n                    padding: const EdgeInsets.only(right: 16.0),\r\n                    child: ClickableWidget(\r\n                      onTap: () => const CloseOverlayNotification().dispatch(context),\r\n                      child: const Icon(Icons.close),\r\n                    ),\r\n                  ),\r\n                  Text(\r\n                    \"DELETE A TAG\",\r\n                    style: theme.textTheme.titleMedium?.copyWith(fontWeight: FontWeight.w800),\r\n                  ),\r\n                ],\r\n              ),\r\n            ),\r\n            const SizedBox(height: 24.0),\r\n            Padding(\r\n              padding: const EdgeInsets.symmetric(horizontal: 16.0),\r\n              child: ConstrainedBox(\r\n                constraints: const BoxConstraints(maxHeight: 284.0),\r\n                child: MouseSingleChildScrollView(\r\n                  child: Wrap(\r\n                    runSpacing: 4.0,\r\n                    alignment: WrapAlignment.center,\r\n                    children: [\r\n                      for (var tag in addableTags)\r\n                        Padding(\r\n                          padding: const EdgeInsets.only(right: 4.0),\r\n                          child: TagWidget(\r\n                            tag: tag,\r\n                            icon: null,\r\n                            onTap: tapHandler(context, tag),\r\n                            enabled: tag is CustomTag,\r\n                          ),\r\n                        ),\r\n                    ],\r\n                  ),\r\n                ),\r\n              ),\r\n            ),\r\n            const SizedBox(height: 32.0),\r\n            IconWidget(\r\n              icon: Icons.arrow_back,\r\n              color: TagColors.addButton,\r\n              onTap: () {\r\n                const SwitchOverlayNotification(mode: OverlayMode.select).dispatch(context);\r\n              },\r\n            ),\r\n          ],\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n"
        }
    ]
}